var component_ellipse={get_ellipse:function(){function e(){this.canvas_container_id,this.nom,this.centre,this.largeur,this.hauteur,this.couleur,this.checkData=function(){var e=typeof this.centre!="undefined"&&typeof this.largeur!="undefined"&&typeof this.hauteur!="undefined";return e?!0:!1},this.draw=function(e){if(!this.checkData()){console.error("Les parametres suivant sont invalides pour le composant ellipse "+this.nom+" : "+"centre : "+this.centre+" "+"largeur : "+this.largeur+" "+"hauteur : "+this.hauteur+" "+"couleur : "+this.couleur),console.error("Donnée(s) invalide(s). Aucune ellipse a dessiner pour le composant ellipse "+this.nom);return}console.debug("dessin de l'ellipse "+this.nom+" avec les valeurs : "+"centre : "+this.centre+" "+"largeur : "+this.largeur+" "+"hauteur : "+this.hauteur+" "+"couleur : "+this.couleur);var t=e.ellipse(this.centre.x,this.centre.y,this.largeur/2,this.hauteur/2),n=color_utils.get_colorHelper();return params={fill:n.buildRaphaelJsRGBA(this.couleur)},t.attr(params),console.log("Fin du dessin de l'ellipse "+this.nom),t}}return new e}},component_path_shape={get_path_shape:function(){function e(){this.canvas_container_id,this.points,this.couleurTraitsLaison,this.traitDeLaisonFin,this.relierLesPointsExtremes,this.couleur,this.checkData=function(){var e=typeof this.points!="undefined"&&typeof this.relierLesPointsExtremes!="undefined";return e?!0:!1},this.draw=function(e){if(!this.checkData()){console.error("Les parametres suivant sont invalides pour le composant chemin de point "+this.nom+" : "+"points : "+this.points+" "+"couleurTraitsLaison : "+this.couleurTraitsLaison+" "+"traitDeLaisonFin : "+this.traitDeLaisonFin+" "+"relierLesPointsExtremes : "+this.relierLesPointsExtremes+" "+"couleur : "+this.couleur),console.error("Donnée(s) invalide(s). Aucune forme (faite de points reliés entre eux) a dessiner pour le composant "+this.nom);return}var t=this.points[0],n="M "+t.x+" "+t.y,r=this.points.length;for(var i=1;i<r;i++)n+=" L "+this.points[i].x+" "+this.points[i].y;n+=this.relierLesPointsExtremes?" Z":"",console.debug("Construction de la forme avec le chemin : "+n);var s=e.path(n),o=color_utils.get_colorHelper(),u={fill:o.buildRaphaelJsRGBA(this.couleur),"stroke-width":this.traitDeLaisonFin!=null&&this.traitDeLaisonFin!==undefined&&this.traitDeLaisonFin?1:4};return this.couleurTraitsLaison!=null&&this.couleurTraitsLaison!==undefined&&(u.stroke=o.buildRaphaelJsRGBA(this.couleurTraitsLaison)),s.attr(u),console.log("Fin du dessin de la forme faite de points "+this.nom),s}}return new e}},backend_rest_api_utils={get_backend_helper:function(){function e(){this.backendHostName=webappConf.back_end.host,this.backendPort=webappConf.back_end.port,this.backendServicePath=webappConf.back_end.items_service_path,this.checkData=function(){var e=typeof this.backendHostName!="undefined"&&typeof this.backendPort!="undefined"&&typeof this.backendServicePath!="undefined";return e?!0:!1},this.getGraphicalComponentByName=function(e){if(!this.checkData()){console.error("Les parametres suivant sont invalides pour effectuer un appel vers le backend pour composant "+e+". Données : "+"backendHostName : "+this.backendHostName+" "+"backendPort : "+this.backendPort+" "+"backendServicePath : "+this.backendServicePath),console.error("Donnée(s) invalide(s). Aucun appel vers le backend sera effectué pour le composant "+this.nom);return}var t=new XMLHttpRequest,n="http://"+this.backendHostName+":"+this.backendPort+this.backendServicePath+"?nom="+e;t.open("GET",n,!1),t.setRequestHeader("Content-type","application/json"),t.send();var r=t.responseText;console.debug("When calling "+n+" Received from back end : "+r);var i=JSON.parse(r);return i}}return new e}},pixels_utils={pixelsHelper:function(){function e(){this.ajustPointsPathIntoCanvas=function(e,t){var n=t.width,r=t.height,i=screen.width,s=screen.height,o=n/i,u=r/s;console.debug("Replace into canvas with the following data canvas_width = "+n+" "+"canvas_height = "+r+" "+"screen_width = "+i+" "+"screen_height = "+s+" "+"rapport_width = "+o+" "+"rapport_height = "+u);var a=e.points,f=a.length;for(var l=0;l<f;l++){var c=a[l].x,h=a[l].y;a[l].x=c*o,a[l].y=h*u}},this.ajustEllipseIntoCanvas=function(e,t){var n=t.width,r=t.height,i=screen.width,s=screen.height,o=n/i,u=r/s;console.debug("Replace into canvas with the following data canvas_width = "+n+" "+"canvas_height = "+r+" "+"screen_width = "+i+" "+"screen_height = "+s+" "+"rapport_width = "+o+" "+"rapport_height = "+u),e.centre.x=e.centre.x*o,e.centre.y=e.centre.y*u,e.largeur=e.largeur*o,e.hauteur=e.hauteur*u}}return new e}},color_utils={get_colorHelper:function(){function e(){this.buildRaphaelJsRGBA=function(e){return e!=null&&e!==undefined?"rgba("+e.r*255+", "+e.g*255+", "+e.b*255+", "+e.a+")":null}}return new e}},esiee_components={get_designer:function(){function e(){this.canvas_container_id,this.nom,this.ellipses,this.formesAvecPoints,this.checkData=function(){var e=typeof this.nom!="undefined";return e?(console.info("Validation des donnees terminé... Affichage du composant "+this.nom+" en cours"),!0):(console.error("Le nom du composant est invalid."),!1)},this.initData=function(){var e=backend_rest_api_utils.get_backend_helper(),t=e.getGraphicalComponentByName(this.nom),n=t.length;return n!=1?(console.error("1 seul composant attendu avec le nom : "+this.nom+" mais "+n+" ont été réçus"),!1):(this.ellipses=t[0].ellipses,this.formesAvecPoints=t[0].formesAvecPoints,!0)},this.drawComponents=function(){if(!this.checkData()){console.error("Erreur lors de la validation des données. L'affichage du composant est intérrompu.");return}if(!this.initData()){console.error("Erreur lors de la récupération des données. L'affichage du composant est intérrompu.");return}var e=new Raphael(document.getElementById(this.canvas_container_id));Raphael.prototype.drawComponent=function(e){return e.draw(this)};if(typeof this.ellipses!="undefined"){var t=this.ellipses.length;console.info("Le composant "+this.nom+" contient "+t+" ellipses (ou cercles)");for(var n=0;n<t;n++){var r=this.ellipses[n],i=r.nom!=null&&r.nom!==undefined?r.nom:this.nom+"_ellipse_"+n;console.log("Dessin de l'ellipse "+i+" avec l'ID "+r.id);var s=component_ellipse.get_ellipse();s.canvas_container_id=this.canvas_container_id,s.nom=i,s.centre=r.centre,s.largeur=r.l,s.hauteur=r.h,s.couleur=r.couleur;var o=pixels_utils.pixelsHelper();o.ajustEllipseIntoCanvas(s,e);var u=e.drawComponent(s)}console.log("Dessin des ellipses terminé pour le composant "+this.nom)}if(typeof this.formesAvecPoints!="undefined"){var a=this.formesAvecPoints.length;console.info("Le composant "+this.nom+" contient "+a+" forme(s) définit à partir de points");for(var n=0;n<a;n++){var f=this.formesAvecPoints[n],l=f.nom!=null&&f.nom!==undefined?f.nom:this.nom+"_forme_avec_points_"+n;console.log("Dessin de la forme "+l+" avec l'ID "+f.id);var c=component_path_shape.get_path_shape();c.canvas_container_id=this.canvas_container_id,c.nom=l,c.points=f.points,c.couleurTraitsLaison=f.couleurTraitsLaison,c.traitDeLaisonFin=f.traitDeLaisonFin,c.relierLesPointsExtremes=f.relierLesPointsExtremes,c.couleur=f.couleur;var o=pixels_utils.pixelsHelper();o.ajustPointsPathIntoCanvas(c,e);var h=e.drawComponent(c)}console.log("Dessin des formes avec points terminé pour le composant "+this.nom)}}}return new e}}